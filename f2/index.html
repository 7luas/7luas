<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap');

        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
            text-align: center;
            background-color: #f8f8f8;
        }

        header {
            padding: 20px;
            font-size: 1.2em;
        }

        .filters {
            margin-bottom: 20px;
        }

        .filters button {
            margin: 5px;
            padding: 10px;
            border: none;
            cursor: pointer;
            background: lightgray;
            border-radius: 5px;
            transition: 0.3s;
        }

        .filters button.active {
            background: blue;
            color: white;
        }

        #project-count {
            margin-bottom: 10px;
            font-weight: bold;
        }

        .grid {
            display: grid;
            gap: 10px;
            padding: 10px;
        }

        @media (min-width: 1200px) {
            .grid { grid-template-columns: repeat(3, 1fr); }
        }

        @media (min-width: 800px) and (max-width: 1199px) {
            .grid { grid-template-columns: repeat(2, 1fr); }
        }

        @media (max-width: 799px) {
            .grid { grid-template-columns: repeat(1, 1fr); }
        }

        .tile {
            position: relative;
            overflow: hidden;
            border-radius: 5px;
            background: white;
            border: 2px solid transparent;
            cursor: pointer;
        }

        .tile.featured {
            border-color: red;
        }

        .tile img, .tile video {
            width: 100%;
            display: block;
        }

        .overlay {
            position: absolute;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            width: 100%;
            padding: 10px;
            font-size: 0.9em;
            display: none;
        }

        .tile:hover .overlay {
            display: block;
        }

        footer {
            padding: 20px;
            margin-top: 20px;
            background: #ddd;
        }
    </style>
</head>
<body>

    <header>
        Lorem ipsum lorem ipsum ipsum lorem ipsum ipsum lorem ipsum (v1.01).
    </header>

    <div class="filters">
        <button id="showAll" class="active">Show All</button>
        <button id="featured">Featured</button>
        <div id="tag-buttons"></div>
    </div>

    <p id="project-count"></p>

    <div class="grid" id="portfolio"></div>

    <footer>Â© 2025 Portfolio</footer>

    <script>
        let projects = [];

        fetch('data.json')
            .then(response => response.json())
            .then(data => {
                projects = data.projects;
                generateFilters();
                displayProjects();
            });

        function generateFilters() {
            const tags = new Set();
            projects.forEach(p => p.tags.forEach(t => tags.add(t)));

            const tagButtons = document.getElementById('tag-buttons');
            tags.forEach(tag => {
                const btn = document.createElement('button');
                btn.textContent = tag;
                btn.dataset.tag = tag;
                btn.addEventListener('click', toggleTagFilter);
                tagButtons.appendChild(btn);
            });

            document.getElementById('showAll').addEventListener('click', () => applyFilter('all'));
            document.getElementById('featured').addEventListener('click', () => applyFilter('featured'));
        }

        function displayProjects(filter = 'all', selectedTags = []) {
            const container = document.getElementById('portfolio');
            container.innerHTML = '';

            let filteredProjects = projects;
            if (filter === 'featured') {
                filteredProjects = projects.filter(p => p.featured);
            } else if (selectedTags.length) {
                filteredProjects = projects.filter(p => p.tags.some(t => selectedTags.includes(t)));
            }

            document.getElementById('project-count').textContent = `${filteredProjects.length} projects shown`;

            filteredProjects.forEach(project => {
                const tile = document.createElement('div');
                tile.className = `tile${project.featured ? ' featured' : ''}`;

                const mediaElement = project.mainMedia.endsWith('.mp4')
                    ? `<video src="media/${project.mainMedia}" autoplay loop muted></video>`
                    : `<img src="media/${project.mainMedia}" alt="${project.name}">`;

                const overlay = `
                    <div class="overlay">
                        <strong>${project.name} (${project.projectContent.length})</strong><br>
                        ${project.description}<br>
                        <small>${project.tags.join(', ')}</small>
                    </div>
                `;

                tile.innerHTML = mediaElement + overlay;
                container.appendChild(tile);
            });
        }

        function applyFilter(filter) {
            document.querySelectorAll('.filters button').forEach(btn => btn.classList.remove('active'));
            document.getElementById(filter).classList.add('active');

            const selectedTags = Array.from(document.querySelectorAll('[data-tag].active')).map(btn => btn.dataset.tag);
            displayProjects(filter, selectedTags);
        }

        function toggleTagFilter(event) {
            event.target.classList.toggle('active');
            document.getElementById('showAll').classList.remove('active');
            document.getElementById('featured').classList.remove('active');

            const activeTags = Array.from(document.querySelectorAll('[data-tag].active')).map(btn => btn.dataset.tag);
            if (!activeTags.length) document.getElementById('showAll').classList.add('active');

            displayProjects('tags', activeTags);
        }
    </script>

</body>
</html>
